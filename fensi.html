<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StarGram ✨ 万能彩虹屁版</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .fan-comment { 
            animation: fadeIn 0.4s cubic-bezier(0.2, 0.8, 0.4, 1);
            transform-origin: left center;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(10px) scale(0.98); }
            to { opacity: 1; transform: translateX(0) scale(1); }
        }
        .post-text {
            white-space: pre-line;
            word-break: break-word;
            letter-spacing: 0.02em;
        }
        .rainbow-border {
            background: linear-gradient(90deg, 
                rgba(255,105,180,0.3) 0%, 
                rgba(255,215,0,0.3) 20%,
                rgba(50,205,50,0.3) 40%,
                rgba(30,144,255,0.3) 60%,
                rgba(138,43,226,0.3) 80%);
            background-size: 200% auto;
            animation: gradientBG 3s ease infinite;
        }
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
    </style>
</head>
<body class="bg-gray-50 font-sans antialiased">
    <div class="max-w-2xl mx-auto p-4 pb-20">
        <!-- 赛博标题 -->
        <div class="text-center mb-10">
            <div class="inline-block rainbow-border rounded-full p-0.5 mb-4">
                <div class="bg-white rounded-full px-6 py-2">
                    <h1 class="text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 via-pink-500 to-red-500">
                        万能夸夸机
                    </h1>
                </div>
            </div>
            <p class="text-gray-500 text-sm">就算是"今天呼吸了"也能被夸出花来 ✨</p>
        </div>

        <!-- 发布框 -->
        <div class="bg-white rounded-2xl shadow-lg p-6 mb-8 border border-gray-100">
            <form id="postForm" class="space-y-4">
                <textarea 
                    id="postContent"
                    class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-pink-400 focus:ring-0 text-gray-700 placeholder-gray-400 resize-none transition-all duration-200"
                    rows="4"
                    placeholder="随便输入什么都会收获彩虹屁\n示例：\n\"今天喝到奶茶了\"\n\"不想上班\"\n\"活着好累\"\n\"我放了个屁\""
                    required
                ></textarea>
                <button 
                    type="submit"
                    id="postButton"
                    class="w-full bg-black text-white font-medium py-3.5 px-6 rounded-xl hover:bg-gray-800 active:bg-gray-900 transition-all duration-300 shadow-md hover:shadow-lg active:scale-[0.98] flex items-center justify-center"
                >
                    <span id="buttonText">发射日常</span>
                    <svg id="loadingSpinner" class="hidden w-5 h-5 ml-2 animate-spin" fill="none" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" class="opacity-25"></circle>
                        <path fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" class="opacity-75"></path>
                    </svg>
                </button>
            </form>
        </div>

        <!-- 帖子流 -->
        <div id="postsContainer" class="space-y-6"></div>
    </div>

    <script>
        // ======================
        // 万能彩虹屁引擎
        // ======================
        class UltimatePraiseGenerator {
            constructor() {
                this.fans = this.createFans();
                this.specialCases = this.createSpecialCases();
            }

            createFans() {
                return [
                    { 
                        name: "人间观察员", 
                        emoji: "👁️", 
                        level: "专业", 
                        style: "bg-gray-100 text-gray-800 border-gray-200",
                        type: "observer"
                    },
                    { 
                        name: "夸夸bot", 
                        emoji: "🤖", 
                        level: "24小时在线", 
                        style: "bg-blue-100 text-blue-800 border-blue-200",
                        type: "praiser"
                    },
                    { 
                        name: "赛博知己", 
                        emoji: "💻", 
                        level: "懂你", 
                        style: "bg-purple-100 text-purple-800 border-purple-200",
                        type: "understander"
                    },
                    { 
                        name: "废话诗人", 
                        emoji: "📜", 
                        level: "文艺", 
                        style: "bg-pink-100 text-pink-800 border-pink-200",
                        type: "poet"
                    },
                    { 
                        name: "阴阳师", 
                        emoji: "🎭", 
                        level: "语言艺术家", 
                        style: "bg-yellow-100 text-yellow-800 border-yellow-200",
                        type: "roaster"
                    }
                ];
            }

            createSpecialCases() {
                return {
                    // 特定句式触发神回复
                    "活着": [
                        "好少见的活人感啊！",
                        "能活着就是奇迹了！",
                        "今日份的生命力认证 ✓"
                    ],
                    "上学|上班": [
                        "太真实了！这才是人类啊！",
                        "这种反抗精神爱了爱了",
                        "说出来就是胜利！"
                    ],
                    "奶茶|咖啡": [
                        "会喝！这是当代液体黄金啊！",
                        "舌尖上的经济学！",
                        "饮品选择暴露了你的贵族气质"
                    ],
                    "屁|屎尿": [
                        "好健康的代谢！",
                        "这种生物感太珍贵了",
                        "是生命的律动呢~"
                    ],
                    "无聊|没意思": [
                        "无聊才是创造力的温床！",
                        "能感受到无聊说明灵魂很丰富啊",
                        "这种虚无感...好哲学！"
                    ]
                };
            }

            async generateResponse(text) {
                // 1. 检查是否触发特殊回复
                for (const [keywords, replies] of Object.entries(this.specialCases)) {
                    if (new RegExp(keywords).test(text)) {
                        return this.wrapResponse(
                            replies[Math.floor(Math.random() * replies.length)],
                            "🤖" // 使用bot头像
                        );
                    }
                }

                // 2. 通用回复生成
                const strategies = [
                    this.generatePhilosophyPraise,
                    this.generateWeirdAngle,
                    this.generateHyperbole,
                    this.generateMetaComment
                ];
                
                const selectedStrategy = strategies[Math.floor(Math.random() * strategies.length)];
                return selectedStrategy(text);
            }

            // 生成哲学式夸奖
            generatePhilosophyPraise(text) {
                const openers = [
                    "从「" + text + "」看到了",
                    "透过「" + text + "」折射出",
                    "「" + text + "」背后是"
                ];
                const philosophies = [
                    "存在主义的当代实践",
                    "后现代生活的诗意碎片",
                    "人类本质的朴素表达",
                    "消费社会中的清醒瞬间",
                    "数字化时代的肉身确认"
                ];
                return this.wrapResponse(
                    openers[Math.floor(Math.random() * openers.length)] + 
                    philosophies[Math.floor(Math.random() * philosophies.length)] + "！✨",
                    "📜"
                );
            }

            // 生成清奇角度
            generateWeirdAngle(text) {
                const angles = [
                    "这个" + text + "的角度好刁钻！",
                    "居然能从" + text + "看出你的",
                    text + "这件事暴露了你"
                ];
                const traits = [
                    "超凡的感知力",
                    "隐秘的天赋",
                    "独特的脑回路",
                    "未被发掘的才能",
                    "反常规的智慧"
                ];
                return this.wrapResponse(
                    angles[Math.floor(Math.random() * angles.length)] + 
                    traits[Math.floor(Math.random() * traits.length)] + "！🎯",
                    "👁️"
                );
            }

            // 生成夸张式回复
            generateHyperbole(text) {
                const templates = [
                    "是" + text + "！！！这简直是",
                    "天啊居然是" + text + "！这种",
                    text + "！这波是"
                ];
                const hyperboles = [
                    "本世纪最伟大的发现！",
                    "教科书级别的操作！",
                    "应该载入史册的瞬间！",
                    "人类文明的高光时刻！",
                    "值得诺贝尔奖的成就！"
                ];
                return this.wrapResponse(
                    templates[Math.floor(Math.random() * templates.length)] + 
                    hyperboles[Math.floor(Math.random() * hyperboles.length)],
                    "🎭"
                );
            }

            // 生成元评论
            generateMetaComment(text) {
                const comments = [
                    "敢公开说「" + text + "」真是",
                    "能把「" + text + "」说出来需要",
                    "「" + text + "」这种级别的分享"
                ];
                const qualities = [
                    "莫大的勇气！",
                    "惊人的坦诚度！",
                    "超凡的自我认知！",
                    "突破性的真实感！",
                    "奢侈的真诚！"
                ];
                return this.wrapResponse(
                    comments[Math.floor(Math.random() * comments.length)] + 
                    qualities[Math.floor(Math.random() * qualities.length)],
                    "💻"
                );
            }

            wrapResponse(text, emoji = null) {
                const fan = this.fans.find(f => f.emoji === emoji) || 
                            this.fans[Math.floor(Math.random() * this.fans.length)];
                
                // 随机延迟模拟AI思考
                const delay = 300 + Math.random() * 1500;
                
                return new Promise(resolve => {
                    setTimeout(() => {
                        resolve({
                            fan,
                            text,
                            timestamp: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
                        });
                    }, delay);
                });
            }
        }

        // ======================
        // 页面交互
        // ======================
        const praiseBot = new UltimatePraiseGenerator();

        document.getElementById("postForm").addEventListener("submit", async function(e) {
            e.preventDefault();
            const postText = document.getElementById("postContent").value.trim();
            if (!postText) return;

            // 禁用按钮
            const button = document.getElementById("postButton");
            const buttonText = document.getElementById("buttonText");
            const spinner = document.getElementById("loadingSpinner");
            button.disabled = true;
            buttonText.textContent = "正在生成彩虹屁...";
            spinner.classList.remove("hidden");

            // 创建帖子
            const postId = "post-" + Date.now();
            const postHTML = `
                <div id="${postId}" class="bg-white rounded-2xl shadow-md overflow-hidden border border-gray-100">
                    <div class="p-6">
                        <div class="flex items-start space-x-3">
                            <div class="w-10 h-10 rounded-full bg-black flex items-center justify-center text-white font-bold text-lg flex-shrink-0">
                                ㊙️
                            </div>
                            <div class="flex-1 min-w-0">
                                <p class="font-semibold">秘密投稿</p>
                                <p class="text-xs text-gray-500 mb-2">刚刚</p>
                                <p class="post-text text-gray-700">${escapeHtml(postText)}</p>
                            </div>
                        </div>
                    </div>
                    <div class="border-t border-gray-100 px-6 py-3 bg-gray-50 flex justify-between items-center">
                        <div class="text-xs text-gray-400">
                            ${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}
                        </div>
                    </div>
                    <div id="${postId}-comments" class="bg-gray-50 p-4 space-y-3 border-t border-gray-100">
                        <div class="text-center py-4 text-gray-400 text-sm">
                            <div class="inline-flex items-center">
                                <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                </svg>
                                正在召唤夸夸团...
                            </div>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById("postsContainer").insertAdjacentHTML("afterbegin", postHTML);
            document.getElementById("postContent").value = "";

            // 生成3-5条彩虹屁
            const commentCount = 3 + Math.floor(Math.random() * 3);
            for (let i = 0; i < commentCount; i++) {
                setTimeout(async () => {
                    const comment = await praiseBot.generateResponse(postText);
                    const commentHTML = `
                        <div class="fan-comment">
                            <div class="flex items-start space-x-3">
                                <div class="w-8 h-8 rounded-full flex items-center justify-center text-lg flex-shrink-0" style="background: ${getRandomGradient()}">
                                    ${comment.fan.emoji}
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-baseline flex-wrap">
                                        <p class="font-semibold text-sm mr-2">${comment.fan.name}</p>
                                        <span class="text-xs px-2 py-0.5 rounded-full border ${comment.fan.style}">${comment.fan.level}</span>
                                    </div>
                                    <p class="mt-1 text-sm text-gray-700">${comment.text}</p>
                                    <p class="text-xs text-gray-400 mt-1">${comment.timestamp}</p>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    const commentsContainer = document.getElementById(`${postId}-comments`);
                    commentsContainer.querySelector(".text-center")?.remove();
                    commentsContainer.insertAdjacentHTML("beforeend", commentHTML);
                    
                    // 滚动到最新评论
                    commentsContainer.lastElementChild?.scrollIntoView({
                        behavior: "smooth",
                        block: "nearest"
                    });
                }, 800 * i); // 分批加载
            }

            // 恢复按钮
            setTimeout(() => {
                button.disabled = false;
                buttonText.textContent = "发射日常";
                spinner.classList.add("hidden");
            }, 500);
        });

        // 辅助函数
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function getRandomGradient() {
            const gradients = [
                "linear-gradient(135deg, #f6d365 0%, #fda085 100%)",
                "linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%)",
                "linear-gradient(135deg, #a6c1ee 0%, #fbc2eb 100%)",
                "linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%)",
                "linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%)",
                "linear-gradient(135deg, #ffc3a0 0%, #ffafbd 100%)"
            ];
            return gradients[Math.floor(Math.random() * gradients.length)];
        }
    </script>
</body>
</html>
